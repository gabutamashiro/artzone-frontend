import { useContext } from 'react';
import { useHistory } from 'react-router-dom';
import Context from '../../context';
import logo from '../../logo.png';
import { useLocation } from 'react-router-dom';
import CreateButton from '../create/CreateButton';
import CreateProduct from '../market/CreateProduct';

const Header = (props) => {

  const { user, setUser, cometChat } = useContext(Context);

  const history = useHistory();

  const location = useLocation();

  const logout = async () => {
    const isLogout = window.confirm('Você quer deslogar da conta?');
    if (isLogout) {
      await cometChat.logout();
      localStorage.removeItem('auth');
      setUser(null);
      history.push('/login');
    }
  };

  const goHome = () => {
    history.push('/');
  };

  const goProfile = () => {
    history.push(`/profile/${user.id}`)
  };

  const goNotification = () => {
    history.push('/notifications');
  };

  const goSearch = () => {
    history.push('/search');
  };

  const goMarket = () => {
    history.push('/market');
  };

  const goOrders = () => {
    history.push(`/${user.id}/orders`);
  };

  const goChat = () => {
    history.push('/chat');
  };

  return (
      <div className="sidebar">
          <div className='sidebarItens'>
          <span onClick={goHome}>
            { location.pathname === '/' ?
              <div><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 -960 960 960" width="24"><path d="M480-60.782q-85.863 0-162.301-33.195-76.439-33.196-133.482-90.24-57.044-57.043-90.24-133.493-33.195-76.45-33.195-162.325 0-86.922 33.63-163.313 33.631-76.392 91.674-133.218 58.044-56.826 135.395-89.739 77.352-32.913 165.157-32.913 83.623 0 158.297 28.913 74.674 28.913 131.283 79.956 56.609 51.044 89.805 120.766 33.195 69.722 33.195 150.453 0 118.391-70.848 188.37-70.847 69.978-178.196 69.978h-60.999q-6.739 0-9.956 3.87-3.218 3.869-3.218 9.304 0 10.87 11.609 26.587 11.608 15.717 11.608 41.891 0 54.521-33.717 86.435Q531.783-60.782 480-60.782ZM266.783-440q26 0 43-17t17-43q0-26-17-43t-43-17q-26 0-43 17t-17 43q0 26 17 43t43 17Zm116.608-154.913q26 0 43-17t17-43q0-26-17-43t-43-17q-26 0-43 17t-17 43q0 26 17 43t43 17Zm193.218 0q26 0 43-17t17-43q0-26-17-43t-43-17q-26 0-43 17t-17 43q0 26 17 43t43 17ZM691.521-440q26 0 43-17t17-43q0-26-17-43t-43-17q-26 0-43 17t-17 43q0 26 17 43t43 17Z"/></svg></div>
              :
              <div><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 -960 960 960" width="24"><path d="M479.231-100.001q-77.769 0-146.923-29.962-69.153-29.961-120.769-81.576-51.615-51.616-81.576-120.962Q100.001-401.846 100.001-480q0-79.154 30.77-148.499 30.769-69.346 83.576-120.654 52.808-51.307 123.538-81.076 70.731-29.77 150.884-29.77 75 0 142.153 25.577 67.154 25.577 117.962 70.808 50.807 45.23 80.961 107.499 30.154 62.269 30.154 135.038 0 103.845-61.731 162.46-61.73 58.616-158.268 58.616h-72.461q-17.078 0-27.309 11.154-10.231 11.154-10.231 26.386 0 18.539 15 38.538 15 20 15 45.923 0 39.615-21.923 58.807t-58.845 19.192ZM480-480Zm-220 29.999q21.384 0 35.692-14.307 14.307-14.308 14.307-35.692t-14.307-35.692Q281.384-549.999 260-549.999t-35.692 14.307Q210.001-521.384 210.001-500t14.307 35.692q14.308 14.307 35.692 14.307Zm120-160q21.384 0 35.692-14.307 14.307-14.308 14.307-35.692t-14.307-35.692Q401.384-709.999 380-709.999t-35.692 14.307Q330.001-681.384 330.001-660t14.307 35.692q14.308 14.307 35.692 14.307Zm200 0q21.384 0 35.692-14.307 14.307-14.308 14.307-35.692t-14.307-35.692Q601.384-709.999 580-709.999t-35.692 14.307Q530.001-681.384 530.001-660t14.307 35.692q14.308 14.307 35.692 14.307Zm120 160q21.384 0 35.692-14.307 14.307-14.308 14.307-35.692t-14.307-35.692Q721.384-549.999 700-549.999t-35.692 14.307Q650.001-521.384 650.001-500t14.307 35.692q14.308 14.307 35.692 14.307ZM479.231-160q9.769 0 15.269-4.808Q500-169.615 500-178q0-14-15-31.461-15-17.462-15-54.693 0-42.769 29-69.307Q528-360 570-360h70q70.616 0 115.308-41.385Q800-442.77 800-521.077q0-121.385-93.077-200.154Q613.846-800 488.769-800q-137.154 0-232.961 93Q160-614 160-480q0 133 93.5 226.5T479.231-160Z"/></svg></div>
            }
            <p>HOME</p>
          </span>
          <span onClick={goSearch}>
            { location.pathname === '/search' ?
              <div><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 -960 960 960" width="24"><path d="M782-82 523-341q-29 20-67.5 32T372-297q-118 0-200.5-82.5T89-580q0-118 82.5-200.5T372-863q118 0 200.5 82.5T655-580q0 46-12 83.5T611-431l260 261-89 88ZM372-423q66 0 111.5-45.5T529-580q0-66-45.5-111.5T372-737q-66 0-111.5 45.5T215-580q0 66 45.5 111.5T372-423Z"/></svg></div>
              :
              <div><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 -960 960 960" width="24"><path d="M781.692-136.924 530.461-388.155q-30 24.769-69 38.769t-80.692 14q-102.55 0-173.582-71.014t-71.032-173.537q0-102.524 71.014-173.601 71.014-71.076 173.538-71.076 102.523 0 173.6 71.032T625.384-580q0 42.846-14.385 81.846-14.385 39-38.385 67.846l251.231 251.231-42.153 42.153Zm-400.923-258.46q77.308 0 130.962-53.654Q565.385-502.692 565.385-580q0-77.308-53.654-130.962-53.654-53.654-130.962-53.654-77.308 0-130.962 53.654Q196.154-657.308 196.154-580q0 77.308 53.653 130.962 53.654 53.654 130.962 53.654Z"/></svg></div>
            }
            <p>PESQUISA</p>
          </span>
          <span onClick={goNotification}>
            { location.pathname === '/notifications' ?
            <div><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 -960 960 960" width="24"><path d="m479-74-81-73q-105-94-173.5-163t-108-124Q77-489 61-536t-16-98q0-109 72.5-182T299-889q51 0 97 18t83 53q37-35 83-53t97-18q109 0 182.5 73T915-634q0 50-15.5 97T844-435.5q-40 54.5-109 124T560-147l-81 73Z"/></svg></div>
              :
            <div><svg aria-label="Activity Feed" className="_8-yf5 " color="#262626" fill="#262626" height="22" role="img" viewBox="0 0 48 48" width="22"><path d="M34.6 6.1c5.7 0 10.4 5.2 10.4 11.5 0 6.8-5.9 11-11.5 16S25 41.3 24 41.9c-1.1-.7-4.7-4-9.5-8.3-5.7-5-11.5-9.2-11.5-16C3 11.3 7.7 6.1 13.4 6.1c4.2 0 6.5 2 8.1 4.3 1.9 2.6 2.2 3.9 2.5 3.9.3 0 .6-1.3 2.5-3.9 1.6-2.3 3.9-4.3 8.1-4.3m0-3c-4.5 0-7.9 1.8-10.6 5.6-2.7-3.7-6.1-5.5-10.6-5.5C6 3.1 0 9.6 0 17.6c0 7.3 5.4 12 10.6 16.5.6.5 1.3 1.1 1.9 1.7l2.3 2c4.4 3.9 6.6 5.9 7.6 6.5.5.3 1.1.5 1.6.5.6 0 1.1-.2 1.6-.5 1-.6 2.8-2.2 7.8-6.8l2-1.8c.7-.6 1.3-1.2 2-1.7C42.7 29.6 48 25 48 17.6c0-8-6-14.5-13.4-14.5z"></path></svg></div>
            }
            <p>NOTIFICAÇÕES</p>
          </span>
          <span onClick={goChat}>
            { location.pathname === '/chat' ?
              <div><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 -960 960 960" width="24"><path d="M240-400h320v-80H240v80Zm0-120h480v-80H240v80Zm0-120h480v-80H240v80ZM60.782-60.782v-732.435q0-44.305 30.848-75.153 30.848-30.848 75.153-30.848h626.434q44.305 0 75.153 30.848 30.848 30.848 30.848 75.153v466.434q0 44.305-30.848 75.153-30.848 30.848-75.153 30.848H220.782l-160 160Z"/></svg></div>
              :
              <div><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 -960 960 960" width="24"><path d="M250.001-410.001h299.998v-59.998H250.001v59.998Zm0-120h459.998v-59.998H250.001v59.998Zm0-120h459.998v-59.998H250.001v59.998Zm-150 531.537v-669.227q0-30.308 21-51.308t51.308-21h615.382q30.308 0 51.308 21t21 51.308v455.382q0 30.308-21 51.308t-51.308 21H241.539L100.001-118.464Zm116-201.536h571.69q4.616 0 8.463-3.846 3.846-3.847 3.846-8.463v-455.382q0-4.616-3.846-8.463-3.847-3.846-8.463-3.846H172.309q-4.616 0-8.463 3.846-3.846 3.847-3.846 8.463v523.076L216.001-320ZM160-320v-480V-320Z"/></svg></div>
            }
            <p>MENSAGENS</p>
          </span>
          <CreateButton/>
          &nbsp;
          <span onClick={goMarket}>
            { location.pathname === '/market' ?
              <div><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 -960 960 960" width="24"><path d="M206.783-60.782q-44.305 0-75.153-30.848-30.848-30.848-30.848-75.153V-628.13q0-44.305 30.848-75.153 30.848-30.848 75.153-30.848h64.738q0-86.392 60.761-147.435Q393.043-942.61 480-942.61t147.718 61.044q60.761 61.043 60.761 147.435h64.738q44.305 0 75.153 30.848 30.848 30.848 30.848 75.153v461.347q0 44.305-30.848 75.153-30.848 30.848-75.153 30.848H206.783ZM480-379.65q86.957 0 147.718-60.761 60.761-60.761 60.761-147.718H582.477q0 43.217-29.63 72.847-29.63 29.631-72.847 29.631t-72.847-29.631q-29.63-29.63-29.63-72.847H271.521q0 86.957 60.761 147.718Q393.043-379.651 480-379.651Zm-102.477-354.48h204.954q0-43.217-29.63-72.847-29.63-29.631-72.847-29.631t-72.847 29.631q-29.63 29.63-29.63 72.847Z"/></svg></div>
              :
              <div><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 -960 960 960" width="24"><path d="M212.309-100.001q-29.923 0-51.115-21.193-21.193-21.192-21.193-51.115v-455.382q0-29.923 21.193-51.115 21.192-21.193 51.115-21.193h87.692q0-74.922 52.538-127.46Q405.078-879.997 480-879.997t127.461 52.538q52.538 52.538 52.538 127.46h87.692q29.923 0 51.115 21.193 21.193 21.192 21.193 51.115v455.382q0 29.923-21.193 51.115-21.192 21.193-51.115 21.193H212.309Zm0-59.999h535.382q4.616 0 8.463-3.846 3.846-3.847 3.846-8.463v-455.382q0-4.616-3.846-8.463-3.847-3.846-8.463-3.846H212.309q-4.616 0-8.463 3.846-3.846 3.847-3.846 8.463v455.382q0 4.616 3.846 8.463 3.847 3.846 8.463 3.846ZM480-420.001q74.922 0 127.461-52.538Q659.999-525.078 659.999-600H600q0 50-35 85t-85 35q-50 0-85-35t-35-85h-59.999q0 74.922 52.538 127.461Q405.078-420.001 480-420.001ZM360-699.999h240q0-50-35-85t-85-35q-50 0-85 35t-35 85ZM200-160V-640-160Z"/></svg></div>
            }
            <p>MERCADO</p>
          </span>
          <CreateProduct/>
          <span onClick={goOrders}>
            { location.pathname === `/${user?.id}/orders` ?
              <div><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 -960 960 960" width="24"><path d="M235.478-101.912q-48.391 0-98.327-26.805-49.935-26.804-84.283-77.501 31.653 0 59.218-18.239 27.565-18.239 29.826-58.934 2.826-52.261 40.37-89.24 37.544-36.978 93.196-36.978t94.892 39.239q39.239 39.24 39.239 94.892 0 72.218-50.957 122.892-50.956 50.674-123.174 50.674Zm245.827-251.87L353.782-481.305l384.002-384.001q11-11 27.5-11.5t28.5 11.5l71.522 71.522q12 12 12 28t-12 28L481.305-353.782Z"/></svg></div>
              :
              <div><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 -960 960 960" width="24"><path d="M240-120q-45 0-89-22t-71-58q26 0 53-20.5t27-59.5q0-50 35-85t85-35q50 0 85 35t35 85q0 66-47 113t-113 47Zm0-80q33 0 56.5-23.5T320-280q0-17-11.5-28.5T280-320q-17 0-28.5 11.5T240-280q0 23-5.5 42T220-202q5 2 10 2h10Zm230-160L360-470l358-358q11-11 27.5-11.5T774-828l54 54q12 12 12 28t-12 28L470-360Zm-190 80Z"/></svg></div>
            }
            <p>PEDIDOS</p>
          </span>
          </div>
          &nbsp;
          <div className='myProfile' onClick={goProfile}>
            <span className="header__user-avatar">
                <img src={`http://localhost:8080${user?.user_avatar}`} alt="user-avatar" />
                <p>{ user?.user_full_name }</p>  
            </span>
            <span onClick={logout}>
          <div><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 -960 960 960" width="24"><path d="M216.155-120q-30.307 0-51.307-21-21-21-21-51.307v-555.384q0-30.308 21-51.308t51.307-21h268.461V-760H216.155q-4.616 0-8.462 3.846-3.847 3.847-3.847 8.463v555.384q0 4.616 3.847 8.462 3.846 3.846 8.462 3.846h268.461V-120H216.155Zm429.23-179.232-41.537-43.384L701.232-440H364.616v-59.999h336.616l-97.384-97.384 41.537-43.383 170.767 170.767-170.767 170.767Z"/></svg></div>
            <p>SAIR</p>
          </span>
            </div>
        </div>
  );
}

export default Header;